# 什么是垃圾
程序中不再使用的对象。
## 垃圾是如何产生的
1. js 分为原始类型和引用类型
2. 原始类型：number, string, boolean, null, undefined, symbol
3. 引用类型：object, array, function
4. 引用类型的值是保存在堆内存中，在栈中存放的是指向堆内存的指针

## 如何判定一个 对象是否被引用
1. 引用计数， 当引用次数为0时，表示不再被引用，应该被回收，但是有一个缺点，循环引用时，会导致引用计数不为0
2. 标记清除，从根对象开始遍历，标记所有可以访问到的对象，然后清除没有标记的对象

## nodejs 垃圾回收机制
1. V8 引擎采用分代回收策略，将内存分为新生代和老生代
2. 新生代：存活时间较短的对象
3. 老生代：存活时间较长的对象
4. 增量回收： 每个垃圾回收任务都会被分为几个小任务，每个小任务执行一会儿，然后切换到js代码执行，这样可以减少垃圾回收的停顿时间


## 代码应该如何设计来避免内存泄漏
1. 事件监听应该清除
2. 定时器应该清除
3. 避免循环引用
4. 闭包应该及时释放
5. 适当使用对象池，避免频繁创建对象
