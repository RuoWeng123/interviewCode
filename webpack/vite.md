# vite 是如何构建的
1. 冷启动：

* 当你启动Vite开发服务器时，它会读取你的项目文件并构建一个基于原生 ES 模块的开发服务器。
* Vite不会像传统的打包工具那样将整个应用打包成一个巨大的文件，而是将每个模块都作为一个单独的文件。
* 在初次访问应用时，Vite会构建一个虚拟的服务端渲染（Server-Side Rendered）HTML页面，以实现快速的冷启动。
2. 模块预构建（Module Pre-Building）：

* 在开发过程中，Vite会对每个模块进行预构建。这意味着它会分析你的代码并生成一个优化的构建，以确保冷启动和HMR的速度。
* 与传统的打包工具不同，Vite只构建需要的模块，而不会构建整个应用。
3. HMR（热模块替换）：

* Vite利用原生 ES 模块的特性，通过浏览器的模块系统实现热模块替换。
* 当你修改了一个模块，Vite会将新的模块发送到浏览器，然后通过原生的模块系统进行更新，实现快速的热模块替换。
4. 生产构建：

* 当你准备部署应用时，Vite会生成一个生产环境的构建。
* 在生产构建中，Vite会将所有模块打包成一个或多个最终的生产文件，以确保在生产环境中的最佳性能。


# vite 为什么比webpack 快
Vite相对于Webpack的速度优势主要来自以下几个方面：

1. ES 模块原生支持：

* Vite使用原生 ES 模块来处理代码，而不是像Webpack一样通过Babel等工具将代码转换为CommonJS模块。
* 原生 ES 模块的特性允许在开发环境中更精确地分析和加载模块，从而加速冷启动和热模块替换。
2. 模块预构建：

* Vite通过分析代码的依赖关系，只构建当前需要的模块，而不是整个应用。
* 这种模块级别的构建策略大大减小了构建的范围，提高了构建速度。
3. HMR（热模块替换）的原生支持：

* Vite利用原生 ES 模块系统实现了更快速的热模块替换。
* HMR的实现是基于浏览器原生的模块加载器，而不是依赖于额外的运行时代码。
4. 更轻量的打包：

* Vite在开发环境下不进行打包，而是以原生 ES 模块的形式提供代码。这避免了传统Webpack开发环境下的繁重打包过程。
* 在生产环境中，Vite的打包也更加轻量，因为它遵循了传统的打包和代码分割策略，但在开发环境和HMR方面它更加高效。
5. 优秀的性能优化：

* Vite针对开发过程中的性能优化进行了精心设计，如快速的构建速度和低内存占用。
* 对于开发者来说，这意味着更短的构建时间和更高的开发效率。
总体而言，Vite的设计理念以及对现代前端工程化的创新性思考使其在开发环境下表现出色，特别适合大型项目和需要频繁构建的场景。然而，在生产环境下，Webpack仍然是一个强大且广泛使用的工具，因为它提供了更多的配置选项和一些Vite尚未涉及的功能。

## HMR 是如何工作的